{"version":3,"file":"gallery.min.js","sources":["../src/gallery.ts"],"sourcesContent":["import \"./gallery.css\";\n\ninterface GalleryFile {\n  name: string;\n  path?: string;\n  type: \"image\" | \"video\" | \"file\";\n  extension: string;\n  size: number;\n  inline_url?: string;\n  download_url?: string;\n}\n\ninterface VideoMeta {\n  recorded?: boolean;\n  uploaded_at?: number;\n  original?: VideoStreamMeta;\n  processed?: VideoStreamMeta;\n  current?: VideoStreamMeta;\n  original_size?: number;\n  processed_size?: number;\n  action?: string;\n  duration?: number;\n  video?: {\n    codec?: string;\n    width?: number;\n    height?: number;\n    display_width?: number;\n    display_height?: number;\n    fps?: number;\n  };\n  audio?: {\n    codec?: string;\n  };\n  size?: number;\n}\n\ninterface VideoStreamMeta {\n  size?: number;\n  video?: {\n    codec?: string;\n    width?: number;\n    height?: number;\n    display_width?: number;\n    display_height?: number;\n    fps?: number;\n  };\n  audio?: {\n    codec?: string;\n  };\n}\n\ninterface GalleryState {\n  files: GalleryFile[];\n  filteredFiles: GalleryFile[];\n  currentIndex: number;\n  shareHash: string | null;\n  filter: string;\n  sort: string;\n  layout: string;\n  showDetails: boolean;\n  search: string;\n  isSlideshow: boolean;\n  slideshowInterval: ReturnType<typeof setInterval> | null;\n  isZoomed: boolean;\n  zoomScale: number;\n  immersiveTimer: ReturnType<typeof setTimeout> | null;\n  touchStartX: number | null;\n  pinchStartDistance: number | null;\n  pinchStartScale: number;\n  isPulling: boolean;\n  isRefreshing: boolean;\n  isOffline: boolean;\n  videoTimers: {\n    stuck: ReturnType<typeof setTimeout> | null;\n    wait: ReturnType<typeof setTimeout> | null;\n    seek: ReturnType<typeof setTimeout> | null;\n    stall: ReturnType<typeof setTimeout> | null;\n  };\n  videoStatusInterval: ReturnType<typeof setInterval> | null;\n  scrollLockY: number;\n  videoMetaCache: Record<string, VideoMeta>;\n  videoMetaInFlight: Record<string, boolean>;\n  virtual: {\n    enabled: boolean;\n    rendered: number;\n    sentinel: HTMLElement | null;\n    observer: IntersectionObserver | null;\n    inFlight: boolean;\n  };\n}\n\ninterface GalleryElements {\n  grid: HTMLElement | null;\n  loading: HTMLElement | null;\n  empty: HTMLElement | null;\n  emptyTitle: HTMLElement | null;\n  emptyMessage: HTMLElement | null;\n  error: HTMLElement | null;\n  errorTitle: HTMLElement | null;\n  errorMessage: HTMLElement | null;\n  search: HTMLInputElement | null;\n  sort: HTMLSelectElement | null;\n  filters: NodeListOf<HTMLElement>;\n  modal: HTMLElement | null;\n  modalContent: HTMLElement | null;\n  modalTitle: HTMLElement | null;\n  modalMeta: HTMLElement | null;\n  downloadAll: HTMLAnchorElement | null;\n  copyLink: HTMLElement | null;\n  streamBtn: HTMLElement | null;\n  refresh: HTMLElement | null;\n  details: HTMLElement | null;\n  backToTop: HTMLElement | null;\n  viewOriginal: HTMLAnchorElement | null;\n  download: HTMLAnchorElement | null;\n  videoOverlay: HTMLElement | null;\n  overlayMessage: HTMLElement | null;\n  speedBtn: HTMLElement | null;\n  resetVideoBtn: HTMLElement | null;\n  helpOverlay: HTMLElement | null;\n  offlineBanner: HTMLElement | null;\n  pullToRefresh: HTMLElement | null;\n  themeToggle: HTMLElement | null;\n}\n\ninterface GalleryPrefs {\n  theme?: \"dark\" | \"light\";\n  filter?: string;\n  sort?: string;\n  layout?: string;\n  show_details?: boolean;\n}\n\n(function (): void {\n  \"use strict\";\n\n  // ============ CONFIGURATION ============\n  const CONFIG = {\n    STUCK_TIMEOUT: 6000,\n    SEEK_TIMEOUT: 8000,\n    MAX_PRELOAD_CACHE: 15,\n    SLIDESHOW_INTERVAL: 4000,\n    VIRTUAL_SCROLL_THRESHOLD: 100,\n    VIRTUAL_CHUNK_SIZE: 60,\n    VIRTUAL_PREFETCH_PX: 1200,\n  };\n\n  const DROPPR_CONFIG = window.DROPPR_CONFIG || {};\n  const PREVIEW_DEFAULT_WIDTHS = [240, 320, 480, 640, 800];\n  const PREVIEW_WIDTHS = normalizeWidths(DROPPR_CONFIG.previewWidths);\n  const PREVIEW_FORMAT = String(DROPPR_CONFIG.previewFormat || \"auto\")\n    .trim()\n    .toLowerCase();\n  const PREVIEW_SIZES =\n    typeof DROPPR_CONFIG.previewSizes === \"string\" && DROPPR_CONFIG.previewSizes.trim()\n      ? DROPPR_CONFIG.previewSizes.trim()\n      : \"(max-width: 600px) 100vw, (max-width: 900px) 50vw, (max-width: 1200px) 33vw, 25vw\";\n  const ASSET_BASE_URL =\n    typeof DROPPR_CONFIG.assetBaseUrl === \"string\"\n      ? DROPPR_CONFIG.assetBaseUrl.replace(/\\/+$/, \"\")\n      : \"\";\n\n  // ============ BROWSER DETECTION ============\n  const UA = navigator.userAgent || \"\";\n  const IS_IOS =\n    /iPad|iPhone|iPod/.test(UA) ||\n    (navigator.platform === \"MacIntel\" && (navigator.maxTouchPoints || 0) > 1);\n\n  // ============ STATE ============\n  const state: GalleryState = {\n    files: [],\n    filteredFiles: [],\n    currentIndex: 0,\n    shareHash: null,\n    filter: \"all\",\n    sort: \"type_asc\",\n    layout: \"grid\",\n    showDetails: true,\n    search: \"\",\n    isSlideshow: false,\n    slideshowInterval: null,\n    isZoomed: false,\n    zoomScale: 1,\n    immersiveTimer: null,\n    touchStartX: null,\n    pinchStartDistance: null,\n    pinchStartScale: 1,\n    isPulling: false,\n    isRefreshing: false,\n    isOffline: !navigator.onLine,\n    videoTimers: {\n      stuck: null,\n      wait: null,\n      seek: null,\n      stall: null,\n    },\n    videoStatusInterval: null,\n    scrollLockY: 0,\n    videoMetaCache: {},\n    videoMetaInFlight: {},\n    virtual: {\n      enabled: false,\n      rendered: 0,\n      sentinel: null,\n      observer: null,\n      inFlight: false,\n    },\n  };\n\n  // ============ DOM ELEMENTS ============\n  const els: GalleryElements = {} as GalleryElements;\n  let detailsHydrationTimer: ReturnType<typeof setTimeout> | null = null;\n\n  function initElements(): void {\n    els.grid = document.getElementById(\"galleryGrid\");\n    els.loading = document.getElementById(\"loading\");\n    els.empty = document.getElementById(\"emptyState\");\n    els.emptyTitle = document.getElementById(\"emptyTitle\");\n    els.emptyMessage = document.getElementById(\"emptyMessage\");\n    els.error = document.getElementById(\"errorState\");\n    els.errorTitle = document.getElementById(\"errorTitle\");\n    els.errorMessage = document.getElementById(\"errorMessage\");\n    els.search = document.getElementById(\"searchInput\") as HTMLInputElement | null;\n    els.sort = document.getElementById(\"sortSelect\") as HTMLSelectElement | null;\n    els.filters = document.querySelectorAll(\".filter-btn\") as NodeListOf<HTMLElement>;\n    els.modal = document.getElementById(\"modal\");\n    els.modalContent = document.getElementById(\"modalContent\");\n    els.modalTitle = document.getElementById(\"modalTitle\");\n    els.modalMeta = document.getElementById(\"modalMeta\");\n    els.downloadAll = document.getElementById(\"downloadAllBtn\") as HTMLAnchorElement | null;\n    els.copyLink = document.getElementById(\"copyLinkBtn\");\n    els.streamBtn = document.getElementById(\"streamBtn\");\n    els.refresh = document.getElementById(\"refreshBtn\");\n    els.details = document.getElementById(\"detailsBtn\");\n    els.backToTop = document.getElementById(\"backToTop\");\n    els.viewOriginal = document.getElementById(\"viewOriginalBtn\") as HTMLAnchorElement | null;\n    els.download = document.getElementById(\"downloadBtn\") as HTMLAnchorElement | null;\n    els.videoOverlay = document.getElementById(\"videoOverlay\");\n    els.overlayMessage = document.getElementById(\"overlayMessage\");\n    els.speedBtn = document.getElementById(\"speedBtn\");\n    els.resetVideoBtn = document.getElementById(\"resetVideoBtn\");\n    els.helpOverlay = document.getElementById(\"helpOverlay\");\n    els.offlineBanner = document.getElementById(\"offlineBanner\");\n    els.pullToRefresh = document.getElementById(\"pullToRefresh\");\n    els.themeToggle = document.getElementById(\"themeToggle\");\n  }\n\n  // ============ PREFERENCES ============\n  const PREFS_KEY = \"droppr_gallery_prefs\";\n\n  function loadPrefs(): GalleryPrefs {\n    try {\n      return JSON.parse(localStorage.getItem(PREFS_KEY) || \"{}\") as GalleryPrefs;\n    } catch {\n      return {};\n    }\n  }\n\n  function savePrefs(prefs: Partial<GalleryPrefs>): void {\n    try {\n      localStorage.setItem(PREFS_KEY, JSON.stringify({ ...loadPrefs(), ...prefs }));\n    } catch {\n      /* ignore */\n    }\n  }\n\n  // ============ THEME FUNCTIONS ============\n  function getTheme(): \"dark\" | \"light\" {\n    const prefs = loadPrefs();\n    return prefs.theme || \"dark\";\n  }\n\n  function setTheme(theme: \"dark\" | \"light\"): void {\n    const isDark = theme === \"dark\";\n    document.documentElement.setAttribute(\"data-theme\", theme);\n    if (els.themeToggle) {\n      els.themeToggle.textContent = isDark ? \"üåô\" : \"‚òÄÔ∏è\";\n      els.themeToggle.title = isDark ? \"Switch to light theme\" : \"Switch to dark theme\";\n    }\n    savePrefs({ theme });\n  }\n\n  function toggleTheme(): void {\n    const current = getTheme();\n    setTheme(current === \"dark\" ? \"light\" : \"dark\");\n  }\n\n  function initTheme(): void {\n    const theme = getTheme();\n    setTheme(theme);\n    if (els.themeToggle) {\n      els.themeToggle.addEventListener(\"click\", toggleTheme);\n    }\n  }\n\n  // ============ UTILITY FUNCTIONS ============\n  function encodePath(p: string): string {\n    return String(p || \"\")\n      .split(\"/\")\n      .map((s) => encodeURIComponent(s))\n      .join(\"/\");\n  }\n\n  function normalizeWidths(list: number[] | undefined): number[] {\n    const values = Array.isArray(list) ? list : [];\n    const normalized = values\n      .map((value) => Number(value))\n      .filter((value) => Number.isFinite(value) && value > 0);\n    if (normalized.length === 0) {\n      return PREVIEW_DEFAULT_WIDTHS.slice();\n    }\n    normalized.sort((a, b) => a - b);\n    const unique: number[] = [];\n    normalized.forEach((value) => {\n      if (unique[unique.length - 1] !== value) unique.push(value);\n    });\n    return unique;\n  }\n\n  function buildPreviewUrl(path: string, size: number, width?: number): string {\n    let url = `/api/share/${state.shareHash}/preview/${encodePath(path)}?v=${size || 0}`;\n    if (width) url += `&w=${width}`;\n    if (PREVIEW_FORMAT) url += `&format=${encodeURIComponent(PREVIEW_FORMAT)}`;\n    return url;\n  }\n\n  function buildPreviewSrcSet(path: string, size: number): string {\n    if (!PREVIEW_WIDTHS.length) return \"\";\n    return PREVIEW_WIDTHS.map((width) => `${buildPreviewUrl(path, size, width)} ${width}w`).join(\n      \", \"\n    );\n  }\n\n  function formatSize(b: number): string {\n    if (!b) return \"0 B\";\n    const k = 1000,\n      s = [\"B\", \"KB\", \"MB\", \"GB\"];\n    const i = Math.floor(Math.log(b) / Math.log(k));\n    if (i <= 0) return Math.round(b) + \" B\";\n    return (b / Math.pow(k, i)).toFixed(1) + \" \" + s[i];\n  }\n\n  function formatDuration(seconds: number | undefined): string {\n    const s = Number(seconds);\n    if (!Number.isFinite(s) || s <= 0) return \"\";\n    const total = Math.floor(s);\n    const h = Math.floor(total / 3600);\n    const m = Math.floor((total % 3600) / 60);\n    const sec = total % 60;\n    if (h > 0) return `${h}:${String(m).padStart(2, \"0\")}:${String(sec).padStart(2, \"0\")}`;\n    return `${m}:${String(sec).padStart(2, \"0\")}`;\n  }\n\n  function formatUnixSeconds(tsSeconds: number | null | undefined): string {\n    if (tsSeconds == null) return \"\";\n    const n = parseInt(String(tsSeconds), 10);\n    if (!Number.isFinite(n) || n <= 0) return \"\";\n    try {\n      return new Date(n * 1000).toLocaleString();\n    } catch {\n      return \"\";\n    }\n  }\n\n  function clamp(value: number, min: number, max: number): number {\n    return Math.min(max, Math.max(min, value));\n  }\n\n  function getTouchDistance(touches: TouchList): number | null {\n    if (!touches || touches.length < 2) return null;\n    const dx = touches[0].screenX - touches[1].screenX;\n    const dy = touches[0].screenY - touches[1].screenY;\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n\n  function setZoomScale(scale: number): void {\n    const media = els.modalContent?.querySelector(\".modal-media\") as HTMLElement | null;\n    if (!media || media.tagName !== \"IMG\") return;\n    state.zoomScale = clamp(scale, 1, 3);\n    state.isZoomed = state.zoomScale > 1.05;\n    media.style.transform = `scale(${state.zoomScale})`;\n    media.classList.toggle(\"zoomable\", true);\n    const zoomBtn = document.getElementById(\"zoomBtn\");\n    if (zoomBtn) zoomBtn.textContent = state.isZoomed ? \"üîé\" : \"üîç\";\n  }\n\n  function addResourceHint(href: string): void {\n    if (!href || typeof href !== \"string\") return;\n    const trimmed = href.replace(/\\/+$/, \"\");\n    if (!trimmed || trimmed === window.location.origin) return;\n    if (document.querySelector(`link[rel=\"preconnect\"][href=\"${trimmed}\"]`)) return;\n    const preconnect = document.createElement(\"link\");\n    preconnect.rel = \"preconnect\";\n    preconnect.href = trimmed;\n    preconnect.crossOrigin = \"anonymous\";\n    document.head.appendChild(preconnect);\n    const dnsPrefetch = document.createElement(\"link\");\n    dnsPrefetch.rel = \"dns-prefetch\";\n    dnsPrefetch.href = trimmed;\n    document.head.appendChild(dnsPrefetch);\n  }\n\n  function setupResourceHints(): void {\n    addResourceHint(ASSET_BASE_URL);\n  }\n\n  function actionLabel(action: string | undefined): string {\n    const a = String(action || \"\").toLowerCase();\n    if (a === \"transcode_hevc_to_h264\") return \"Transcoded HEVC ‚Üí H.264\";\n    if (a === \"fix_video_errors_extra_streams\") return \"Re-encoded (removed extra streams)\";\n    if (a === \"fix_video_errors_timestamp\") return \"Re-encoded (fixed timestamps)\";\n    if (a === \"faststart\") return \"Faststart (moov moved)\";\n    if (a === \"already_faststart\") return \"Already faststart\";\n    if (a === \"none\") return \"No changes\";\n    return action ? String(action) : \"\";\n  }\n\n  function formatVideoSummary(\n    meta: VideoMeta | VideoStreamMeta | null | undefined,\n    sizeOverride?: number\n  ): string {\n    if (!meta || typeof meta !== \"object\") {\n      const s = Number(sizeOverride);\n      return Number.isFinite(s) && s > 0 ? formatSize(s) : \"‚Äî\";\n    }\n\n    const v = meta.video && typeof meta.video === \"object\" ? meta.video : {};\n    const a = meta.audio && typeof meta.audio === \"object\" ? meta.audio : {};\n\n    let size: number | null = null;\n    if (Number.isFinite(Number(sizeOverride)) && Number(sizeOverride) > 0)\n      size = Number(sizeOverride);\n    else if (Number.isFinite(Number(meta.size)) && Number(meta.size) > 0) size = Number(meta.size);\n\n    const w = parseInt(String(v.display_width || v.width || \"\"), 10);\n    const h = parseInt(String(v.display_height || v.height || \"\"), 10);\n    const res = !isNaN(w) && !isNaN(h) && w > 0 && h > 0 ? `${w}√ó${h}` : \"\";\n\n    const vCodec = v.codec ? String(v.codec).toUpperCase() : \"\";\n    const aCodec = a.codec ? String(a.codec).toUpperCase() : \"\";\n    const codecs = vCodec ? (aCodec ? `${vCodec}/${aCodec}` : vCodec) : aCodec || \"\";\n\n    const dur = formatDuration((meta as VideoMeta).duration);\n    const fpsNum = Number(v.fps);\n    const fps = Number.isFinite(fpsNum) && fpsNum > 0 ? `${Math.round(fpsNum * 100) / 100}fps` : \"\";\n\n    return [size ? formatSize(size) : \"\", res, codecs, dur, fps].filter(Boolean).join(\" ‚Ä¢ \") || \"‚Äî\";\n  }\n\n  function updateDetailsButton(): void {\n    if (!els.details) return;\n    els.details.textContent = state.showDetails ? \"‚Ñπ Details: On\" : \"‚Ñπ Details: Off\";\n  }\n\n  function setDetailsEnabled(enabled: boolean, opts: { skipSave?: boolean } = {}): void {\n    const on = !!enabled;\n    state.showDetails = on;\n    document.body.classList.toggle(\"show-details\", on);\n    updateDetailsButton();\n    if (!opts.skipSave) savePrefs({ show_details: on });\n    if (on) hydrateVideoDetails();\n  }\n\n  async function fetchVideoMeta(path: string): Promise<VideoMeta | null> {\n    const url = `/api/share/${state.shareHash}/video-meta/${encodePath(path)}?t=${Date.now()}`;\n    const res = await fetch(url, { cache: \"no-store\" });\n    if (!res.ok) return null;\n    return (await res.json()) as VideoMeta;\n  }\n\n  function renderVideoDetails(el: HTMLElement | null, data: VideoMeta | null): void {\n    if (!el) return;\n    if (!data || typeof data !== \"object\") {\n      el.innerHTML = '<span class=\"line\">Details unavailable</span>';\n      el.dataset.loaded = \"1\";\n      return;\n    }\n\n    const lines: string[] = [];\n\n    if (data.recorded) {\n      const uploaded = formatUnixSeconds(data.uploaded_at);\n      if (uploaded) lines.push(`Uploaded: ${uploaded}`);\n\n      const original = formatVideoSummary(data.original, data.original_size);\n      const processed = formatVideoSummary(data.processed, data.processed_size);\n      lines.push(`Original: ${original}`);\n\n      const action = actionLabel(data.action);\n      lines.push(`After: ${processed}${action ? ` ‚Ä¢ ${action}` : \"\"}`);\n    } else {\n      const cur = data.current?.size ? formatSize(data.current.size) : \"\";\n      lines.push(cur ? `Size: ${cur}` : \"No video metadata recorded yet\");\n    }\n\n    el.innerHTML = lines.map((l) => `<span class=\"line\">${l}</span>`).join(\"\");\n    el.dataset.loaded = \"1\";\n  }\n\n  async function hydrateVideoDetails(): Promise<void> {\n    if (!state.showDetails) return;\n\n    const nodes = Array.from(\n      document.querySelectorAll('.video-details[data-video-meta=\"1\"]')\n    ) as HTMLElement[];\n    const pending = nodes.filter((el) => el && !el.dataset.loaded && el.dataset.path);\n    if (!pending.length) return;\n\n    let idx = 0;\n    const maxWorkers = Math.min(4, pending.length);\n\n    async function worker(): Promise<void> {\n      while (idx < pending.length) {\n        const el = pending[idx++];\n        const enc = String(el.dataset.path || \"\");\n        let path = enc;\n        try {\n          path = decodeURIComponent(enc);\n        } catch {\n          /* ignore */\n        }\n\n        const key = `${state.shareHash}:${path}`;\n        if (state.videoMetaCache[key]) {\n          renderVideoDetails(el, state.videoMetaCache[key]);\n          continue;\n        }\n\n        if (state.videoMetaInFlight[key]) continue;\n        state.videoMetaInFlight[key] = true;\n        try {\n          const data = await fetchVideoMeta(path);\n          if (data) state.videoMetaCache[key] = data;\n          renderVideoDetails(el, data);\n        } catch {\n          renderVideoDetails(el, null);\n        } finally {\n          delete state.videoMetaInFlight[key];\n        }\n      }\n    }\n\n    const workers: Promise<void>[] = [];\n    for (let i = 0; i < maxWorkers; i++) workers.push(worker());\n    await Promise.all(workers);\n  }\n\n  function showToast(msg: string): void {\n    const t = document.getElementById(\"toast\");\n    const toastMessage = document.getElementById(\"toastMessage\");\n    if (toastMessage) toastMessage.textContent = msg;\n    t?.classList.add(\"show\");\n    setTimeout(() => t?.classList.remove(\"show\"), 3000);\n  }\n\n  async function copyToClipboard(text: string): Promise<boolean> {\n    if (navigator.clipboard?.writeText) {\n      try {\n        await navigator.clipboard.writeText(text);\n        return true;\n      } catch {\n        console.warn(\"Clipboard API failed, trying fallback\");\n      }\n    }\n\n    const textarea = document.createElement(\"textarea\");\n    textarea.value = text;\n    textarea.setAttribute(\"readonly\", \"\");\n    textarea.style.cssText =\n      \"position:fixed;top:0;left:0;width:2em;height:2em;padding:0;border:none;outline:none;box-shadow:none;background:transparent;font-size:16px;\";\n    document.body.appendChild(textarea);\n\n    const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);\n    if (isIOS) {\n      const range = document.createRange();\n      range.selectNodeContents(textarea);\n      const selection = window.getSelection();\n      selection?.removeAllRanges();\n      selection?.addRange(range);\n      textarea.setSelectionRange(0, text.length);\n    } else {\n      textarea.focus();\n      textarea.select();\n    }\n\n    let success = false;\n    try {\n      success = document.execCommand(\"copy\");\n    } catch {\n      console.warn(\"execCommand copy failed\");\n    }\n\n    document.body.removeChild(textarea);\n    return success;\n  }\n\n  function lockPageScroll(): void {\n    if (document.body.classList.contains(\"modal-open\")) return;\n    state.scrollLockY = window.scrollY || 0;\n    document.body.classList.add(\"modal-open\");\n    document.body.style.position = \"fixed\";\n    document.body.style.top = `-${state.scrollLockY}px`;\n    document.body.style.left = \"0\";\n    document.body.style.right = \"0\";\n    document.body.style.width = \"100%\";\n  }\n\n  function unlockPageScroll(): void {\n    if (!document.body.classList.contains(\"modal-open\")) return;\n    document.body.classList.remove(\"modal-open\");\n    document.body.style.position = \"\";\n    document.body.style.top = \"\";\n    document.body.style.left = \"\";\n    document.body.style.right = \"\";\n    document.body.style.width = \"\";\n    const y = state.scrollLockY || 0;\n    state.scrollLockY = 0;\n    window.scrollTo(0, y);\n  }\n\n  // ============ VIDEO MANAGEMENT ============\n  function clearAllVideoTimers(): void {\n    if (!state.videoTimers) return;\n    for (const key of Object.keys(state.videoTimers) as (keyof typeof state.videoTimers)[]) {\n      const t = state.videoTimers[key];\n      if (t) clearTimeout(t);\n      state.videoTimers[key] = null;\n    }\n  }\n\n  function destroyVideo(): void {\n    clearAllVideoTimers();\n    if (state.videoStatusInterval) {\n      clearInterval(state.videoStatusInterval);\n      state.videoStatusInterval = null;\n    }\n    hideVideoOverlay();\n\n    const video = els.modalContent?.querySelector(\"video\") as HTMLVideoElement | null;\n    if (video) {\n      const events = [\n        \"loadstart\",\n        \"waiting\",\n        \"canplaythrough\",\n        \"playing\",\n        \"error\",\n        \"stalled\",\n        \"seeking\",\n        \"seeked\",\n        \"abort\",\n        \"ended\",\n      ];\n      events.forEach((e) => {\n        (video as unknown as Record<string, ((ev: Event) => any) | null>)[\"on\" + e] = null;\n      });\n\n      try {\n        video.pause();\n      } catch {\n        /* ignore */\n      }\n      video.src = \"\";\n      video.load();\n      video.remove();\n    }\n  }\n\n  function killAllConnections(): void {\n    destroyVideo();\n    showToast(\"Connections reset\");\n  }\n\n  function showVideoOverlay(message: string): void {\n    if (els.overlayMessage) els.overlayMessage.textContent = message;\n    els.videoOverlay?.classList.add(\"show\");\n  }\n\n  function hideVideoOverlay(): void {\n    els.videoOverlay?.classList.remove(\"show\");\n  }\n\n  function reloadCurrentVideo(): void {\n    destroyVideo();\n    setTimeout(() => {\n      updateModalContent();\n      showToast(\"Video reloaded\");\n    }, 200);\n  }\n\n  // ============ MODAL CONTENT ============\n  const speeds = [0.5, 0.75, 1, 1.25, 1.5, 2];\n  let currentSpeedIndex = 2;\n\n  function updateModalContent(): void {\n    const file = state.filteredFiles[state.currentIndex];\n    if (!file) {\n      closeModal();\n      return;\n    }\n\n    destroyVideo();\n    if (els.modalContent) els.modalContent.innerHTML = \"\";\n\n    const path = file.path || file.name;\n    const inlineUrl =\n      file.inline_url || `/api/public/dl/${state.shareHash}/${encodePath(path)}?inline=true`;\n    const previewUrl = buildPreviewUrl(path, file.size || 0);\n    const downloadUrl =\n      file.download_url || `/api/share/${state.shareHash}/file/${encodePath(path)}?download=1`;\n\n    if (els.modalTitle) els.modalTitle.textContent = file.name;\n    if (els.modalMeta)\n      els.modalMeta.textContent = `${state.currentIndex + 1} of ${state.filteredFiles.length} ‚Ä¢ ${formatSize(file.size)}`;\n    if (els.viewOriginal) els.viewOriginal.href = inlineUrl;\n    if (els.download) {\n      els.download.href = downloadUrl;\n      els.download.download = file.name;\n    }\n\n    if (file.type === \"video\") {\n      if (els.speedBtn) els.speedBtn.style.display = \"inline-flex\";\n      if (els.resetVideoBtn) els.resetVideoBtn.style.display = \"inline-flex\";\n      createVideoPlayer(inlineUrl, previewUrl, file);\n    } else {\n      if (els.speedBtn) els.speedBtn.style.display = \"none\";\n      if (els.resetVideoBtn) els.resetVideoBtn.style.display = \"none\";\n\n      if (file.type === \"image\" && els.modalContent) {\n        els.modalContent.innerHTML = `<img class=\"modal-media zoomable\" src=\"${inlineUrl}\" alt=\"${file.name}\" style=\"transform:scale(1)\">`;\n      } else if (els.modalContent) {\n        els.modalContent.innerHTML = `\n          <div style=\"text-align:center;padding:2rem;\">\n              <div style=\"font-size:4rem;margin-bottom:1rem;\">${getFileIcon(file.extension)}</div>\n              <p>Preview not available</p>\n              <a href=\"${downloadUrl}\" class=\"action-btn\" style=\"margin-top:1rem;display:inline-flex;\">‚¨áÔ∏è Download</a>\n          </div>`;\n      }\n    }\n  }\n\n  function createVideoPlayer(videoUrl: string, posterUrl: string, file: GalleryFile): void {\n    const container = document.createElement(\"div\");\n    container.style.cssText =\n      \"position:relative;width:100%;height:100%;display:flex;align-items:center;justify-content:center;\";\n\n    const video = document.createElement(\"video\");\n    video.className = \"modal-media\";\n    video.controls = true;\n    video.autoplay = true;\n    video.playsInline = true;\n    video.preload = \"metadata\";\n    video.poster = posterUrl;\n    video.innerHTML = `<source src=\"${videoUrl}\">`;\n\n    container.appendChild(video);\n    els.modalContent?.appendChild(container);\n\n    if (state.videoStatusInterval) {\n      clearInterval(state.videoStatusInterval);\n      state.videoStatusInterval = null;\n    }\n\n    function updateVideoMeta(): void {\n      const base = `${state.currentIndex + 1} of ${state.filteredFiles.length} ‚Ä¢ ${formatSize(file?.size || 0)}`;\n\n      const dur = Number.isFinite(video.duration) ? video.duration : null;\n      if (!dur || dur <= 0) {\n        if (els.modalMeta) els.modalMeta.textContent = base;\n        return;\n      }\n\n      let bufferedTotal = 0;\n      let bufferedAhead = 0;\n      const ct = Number.isFinite(video.currentTime) ? video.currentTime : 0;\n      try {\n        const b = video.buffered;\n        for (let i = 0; i < b.length; i++) {\n          const s = b.start(i);\n          const e = b.end(i);\n          if (!Number.isFinite(s) || !Number.isFinite(e) || e <= s) continue;\n          bufferedTotal += e - s;\n          if (ct >= s && ct <= e) bufferedAhead = Math.max(bufferedAhead, e - ct);\n        }\n      } catch {\n        /* ignore */\n      }\n\n      const pct = Math.max(0, Math.min(1, bufferedTotal / dur));\n      const pctText = Math.round(pct * 100);\n\n      let extra = ` ‚Ä¢ Buffered ${pctText}%`;\n      const size = Number(file?.size || 0);\n      if (Number.isFinite(size) && size > 0) {\n        extra += ` (‚âà${formatSize(size * pct)} / ${formatSize(size)})`;\n      }\n      if (bufferedAhead > 0) extra += ` ‚Ä¢ Ahead ${Math.round(bufferedAhead)}s`;\n\n      if (els.modalMeta) els.modalMeta.textContent = base + extra;\n    }\n\n    updateVideoMeta();\n    state.videoStatusInterval = setInterval(updateVideoMeta, 500);\n    video.addEventListener(\"progress\", updateVideoMeta);\n    video.addEventListener(\"timeupdate\", updateVideoMeta);\n    video.addEventListener(\"loadedmetadata\", updateVideoMeta);\n    video.addEventListener(\"seeking\", updateVideoMeta);\n    video.addEventListener(\"seeked\", updateVideoMeta);\n\n    video.playbackRate = speeds[currentSpeedIndex];\n\n    let hasPlayed = false;\n\n    if (state.videoTimers.stuck) clearTimeout(state.videoTimers.stuck);\n    state.videoTimers.stuck = setTimeout(() => {\n      if (!hasPlayed && !video.paused) {\n        showVideoOverlay(\"Video stuck - tap anywhere to reload\");\n      }\n    }, CONFIG.STUCK_TIMEOUT);\n\n    video.onplaying = (): void => {\n      hasPlayed = true;\n      hideVideoOverlay();\n      clearAllVideoTimers();\n    };\n\n    video.oncanplaythrough = (): void => {\n      hideVideoOverlay();\n    };\n\n    video.onwaiting = (): void => {\n      if (hasPlayed) {\n        if (state.videoTimers.wait) clearTimeout(state.videoTimers.wait);\n        state.videoTimers.wait = setTimeout(() => {\n          if (video.readyState < 3) {\n            showVideoOverlay(\"Buffering... tap to reload if stuck\");\n          }\n        }, CONFIG.STUCK_TIMEOUT);\n      }\n    };\n\n    video.onseeking = (): void => {\n      if (state.videoTimers.seek) clearTimeout(state.videoTimers.seek);\n      state.videoTimers.seek = setTimeout(() => {\n        if (video.seeking) {\n          showVideoOverlay(\"Seek stuck - tap anywhere to reload\");\n        }\n      }, CONFIG.SEEK_TIMEOUT);\n    };\n\n    video.onseeked = (): void => {\n      hideVideoOverlay();\n      if (state.videoTimers.seek) {\n        clearTimeout(state.videoTimers.seek);\n        state.videoTimers.seek = null;\n      }\n    };\n\n    video.onerror = (): void => {\n      hideVideoOverlay();\n      clearAllVideoTimers();\n      showToast(\"Video failed to load\");\n    };\n\n    video.onstalled = (): void => {\n      if (state.videoTimers.stall) clearTimeout(state.videoTimers.stall);\n      state.videoTimers.stall = setTimeout(() => {\n        if (video.readyState < 3) {\n          showVideoOverlay(\"Video stalled - tap to reload\");\n        }\n      }, CONFIG.STUCK_TIMEOUT);\n    };\n  }\n\n  // Speed control\n  const speedBtn = document.getElementById(\"speedBtn\");\n  if (speedBtn) {\n    speedBtn.onclick = (): void => {\n      currentSpeedIndex = (currentSpeedIndex + 1) % speeds.length;\n      const speed = speeds[currentSpeedIndex];\n      if (els.speedBtn) els.speedBtn.textContent = speed === 1 ? \"1x\" : speed + \"x\";\n      const video = els.modalContent?.querySelector(\"video\") as HTMLVideoElement | null;\n      if (video) video.playbackRate = speed;\n      showToast(`Speed: ${speed}x`);\n    };\n  }\n\n  // Reset video button\n  const resetVideoBtn = document.getElementById(\"resetVideoBtn\");\n  if (resetVideoBtn) {\n    resetVideoBtn.onclick = reloadCurrentVideo;\n  }\n\n  // ============ MODAL FUNCTIONS ============\n  function openModal(index: number): void {\n    if (index < 0 || index >= state.filteredFiles.length) return;\n\n    state.currentIndex = index;\n    state.isZoomed = false;\n    state.zoomScale = 1;\n    state.pinchStartDistance = null;\n    state.pinchStartScale = 1;\n    const zoomBtn = document.getElementById(\"zoomBtn\");\n    if (zoomBtn) zoomBtn.textContent = \"üîç\";\n    if (state.isSlideshow) toggleSlideshow();\n\n    lockPageScroll();\n    if (els.modal) {\n      els.modal.style.display = \"block\";\n      void els.modal.offsetHeight; // Force reflow\n      els.modal.classList.add(\"show\");\n    }\n    updateModalContent();\n    resetImmersiveTimer();\n    maybePreloadAdjacentImages();\n  }\n  window.openModal = openModal;\n\n  function openMedia(index: number, evt?: MouseEvent): void {\n    const file = state.filteredFiles[index];\n    if (!file) return;\n\n    if (file.type === \"video\") {\n      const path = file.path || file.name;\n      const url = `/player?share=${encodeURIComponent(state.shareHash || \"\")}&file=${encodeURIComponent(path)}`;\n\n      if (evt?.shiftKey) {\n        openModal(index);\n      } else {\n        window.location.href = url;\n      }\n      return;\n    }\n\n    openModal(index);\n  }\n  window.openMedia = openMedia;\n\n  function closeModal(): void {\n    destroyVideo();\n    if (state.isSlideshow) {\n      if (state.slideshowInterval) clearInterval(state.slideshowInterval);\n      state.isSlideshow = false;\n    }\n    state.isZoomed = false;\n    state.zoomScale = 1;\n    state.pinchStartDistance = null;\n    state.pinchStartScale = 1;\n    if (state.immersiveTimer) clearTimeout(state.immersiveTimer);\n    els.modal?.classList.remove(\"show\", \"immersive\");\n    setTimeout(() => {\n      if (els.modal?.classList.contains(\"show\")) return;\n      if (els.modal) els.modal.style.display = \"none\";\n      if (els.modalContent) els.modalContent.innerHTML = \"\";\n      unlockPageScroll();\n    }, 300);\n  }\n\n  function navigate(direction: number): void {\n    const newIndex = state.currentIndex + direction;\n    if (newIndex >= 0 && newIndex < state.filteredFiles.length) {\n      state.isZoomed = false;\n      state.zoomScale = 1;\n      state.pinchStartDistance = null;\n      state.pinchStartScale = 1;\n      const zoomBtn = document.getElementById(\"zoomBtn\");\n      if (zoomBtn) zoomBtn.textContent = \"üîç\";\n\n      const nextFile = state.filteredFiles[newIndex];\n      if (state.isSlideshow && nextFile?.type === \"video\") {\n        toggleSlideshow();\n      }\n\n      state.currentIndex = newIndex;\n      updateModalContent();\n      resetImmersiveTimer();\n      maybePreloadAdjacentImages();\n    }\n  }\n\n  function resetImmersiveTimer(): void {\n    els.modal?.classList.add(\"active-user\");\n    if (state.immersiveTimer) clearTimeout(state.immersiveTimer);\n    state.immersiveTimer = setTimeout(() => els.modal?.classList.remove(\"active-user\"), 3000);\n  }\n\n  // ============ IMAGE PRELOADING ============\n  const preloadCache = new Map<string, HTMLImageElement>();\n\n  function preloadImage(url: string): void {\n    if (preloadCache.has(url)) return;\n    if (preloadCache.size >= CONFIG.MAX_PRELOAD_CACHE) {\n      const firstKey = preloadCache.keys().next().value;\n      if (firstKey) preloadCache.delete(firstKey);\n    }\n    const img = new Image();\n    img.src = url;\n    preloadCache.set(url, img);\n  }\n\n  function preloadAdjacentImages(): void {\n    [-1, 1].forEach((offset) => {\n      const i = state.currentIndex + offset;\n      if (i >= 0 && i < state.filteredFiles.length) {\n        const file = state.filteredFiles[i];\n        if (file.type === \"image\") {\n          const path = file.path || file.name;\n          const url =\n            file.inline_url || `/api/public/dl/${state.shareHash}/${encodePath(path)}?inline=true`;\n          preloadImage(url);\n        }\n      }\n    });\n  }\n\n  function maybePreloadAdjacentImages(): void {\n    const current = state.filteredFiles[state.currentIndex];\n    if (current?.type !== \"image\") return;\n    preloadAdjacentImages();\n  }\n\n  // ============ FILE ICON ============\n  function getFileIcon(ext: string): string {\n    const e = (ext || \"\").toLowerCase();\n    const icons: Record<string, string> = {\n      pdf: \"üìï\",\n      doc: \"üìÑ\",\n      docx: \"üìÑ\",\n      txt: \"üìù\",\n      xls: \"üìä\",\n      xlsx: \"üìä\",\n      csv: \"üìä\",\n      ppt: \"üìΩÔ∏è\",\n      pptx: \"üìΩÔ∏è\",\n      zip: \"üì¶\",\n      rar: \"üì¶\",\n      \"7z\": \"üì¶\",\n      mp3: \"üéµ\",\n      wav: \"üéµ\",\n      flac: \"üéµ\",\n      html: \"üåê\",\n      css: \"üé®\",\n      js: \"‚öôÔ∏è\",\n      json: \"üìã\",\n      py: \"üêç\",\n      java: \"‚òï\",\n    };\n    return icons[e] || \"üìÑ\";\n  }\n\n  // ============ GALLERY FUNCTIONS ============\n  async function fetchFiles(forceRefresh = false): Promise<void> {\n    const params = new URLSearchParams();\n    if (forceRefresh) params.set(\"refresh\", \"1\");\n    const recursiveParam = new URLSearchParams(window.location.search).get(\"recursive\");\n    if (recursiveParam == null) {\n      params.set(\"recursive\", \"1\");\n    } else {\n      const v = String(recursiveParam).trim().toLowerCase();\n      const flag = v === \"1\" || v === \"true\" || v === \"yes\" || v === \"on\" ? \"1\" : \"0\";\n      params.set(\"recursive\", flag);\n    }\n    params.set(\"v\", String(Date.now()));\n\n    const controller = new AbortController();\n    const timeout = setTimeout(() => controller.abort(), 15000);\n\n    try {\n      const res = await fetch(`/api/share/${state.shareHash}/files?${params}`, {\n        cache: \"no-store\",\n        signal: controller.signal,\n      });\n      if (!res.ok) throw new Error(`Failed: ${res.status}`);\n      state.files = (await res.json()) as GalleryFile[];\n      filterAndRender();\n    } finally {\n      clearTimeout(timeout);\n    }\n  }\n\n  function filterAndRender(): void {\n    if (els.loading) els.loading.style.display = \"none\";\n    if (els.error) els.error.style.display = \"none\";\n\n    const searchLower = state.search.toLowerCase();\n    const matching = state.files.filter((f) => f.name.toLowerCase().includes(searchLower));\n    const countAll = document.getElementById(\"countAll\");\n    const countImages = document.getElementById(\"countImages\");\n    const countVideos = document.getElementById(\"countVideos\");\n    if (countAll) countAll.textContent = String(matching.length);\n    if (countImages)\n      countImages.textContent = String(matching.filter((f) => f.type === \"image\").length);\n    if (countVideos)\n      countVideos.textContent = String(matching.filter((f) => f.type === \"video\").length);\n\n    state.filteredFiles = state.files.filter((file) => {\n      const matchesType = state.filter === \"all\" || file.type === state.filter;\n      const matchesSearch = file.name.toLowerCase().includes(searchLower);\n      return matchesType && matchesSearch;\n    });\n\n    state.filteredFiles.sort((a, b) => {\n      const typeScore = (t: string): number => (t === \"image\" ? 1 : t === \"video\" ? 2 : 3);\n      switch (state.sort) {\n        case \"type_asc\":\n          return typeScore(a.type) - typeScore(b.type) || a.name.localeCompare(b.name);\n        case \"type_desc\":\n          return typeScore(b.type) - typeScore(a.type) || a.name.localeCompare(b.name);\n        case \"name_asc\":\n          return a.name.localeCompare(b.name);\n        case \"name_desc\":\n          return b.name.localeCompare(a.name);\n        case \"size_asc\":\n          return a.size - b.size;\n        case \"size_desc\":\n          return b.size - a.size;\n        default:\n          return 0;\n      }\n    });\n\n    renderGrid();\n  }\n\n  function scheduleHydrateVideoDetails(): void {\n    if (!state.showDetails) return;\n    if (detailsHydrationTimer) clearTimeout(detailsHydrationTimer);\n    detailsHydrationTimer = setTimeout(() => {\n      hydrateVideoDetails().catch(() => {\n        /* ignore */\n      });\n    }, 120);\n  }\n\n  function resetVirtualScroll(): void {\n    if (state.virtual.observer) {\n      state.virtual.observer.disconnect();\n    }\n    if (state.virtual.sentinel?.parentNode) {\n      state.virtual.sentinel.parentNode.removeChild(state.virtual.sentinel);\n    }\n    state.virtual.enabled = false;\n    state.virtual.rendered = 0;\n    state.virtual.sentinel = null;\n    state.virtual.observer = null;\n    state.virtual.inFlight = false;\n    els.grid?.classList.remove(\"virtualized\");\n  }\n\n  function createVirtualSentinel(): HTMLElement {\n    const sentinel = document.createElement(\"div\");\n    sentinel.className = \"virtual-sentinel\";\n    sentinel.setAttribute(\"aria-hidden\", \"true\");\n    return sentinel;\n  }\n\n  function renderBatch(start: number, end: number): void {\n    const frag = document.createDocumentFragment();\n    for (let i = start; i < end; i++) {\n      const file = state.filteredFiles[i];\n      if (!file) continue;\n      const card = document.createElement(\"div\");\n      card.className = \"media-card\";\n      card.innerHTML = createCardHTML(file, i);\n      frag.appendChild(card);\n    }\n\n    if (state.virtual.sentinel) {\n      els.grid?.insertBefore(frag, state.virtual.sentinel);\n    } else {\n      els.grid?.appendChild(frag);\n    }\n  }\n\n  function renderNextBatch(): void {\n    if (!state.virtual.enabled || state.virtual.inFlight) return;\n    state.virtual.inFlight = true;\n\n    const start = state.virtual.rendered;\n    const end = Math.min(start + CONFIG.VIRTUAL_CHUNK_SIZE, state.filteredFiles.length);\n    if (start >= end) {\n      state.virtual.inFlight = false;\n      if (state.virtual.observer) {\n        state.virtual.observer.disconnect();\n      }\n      if (state.virtual.sentinel) {\n        state.virtual.sentinel.remove();\n        state.virtual.sentinel = null;\n      }\n      return;\n    }\n\n    renderBatch(start, end);\n    state.virtual.rendered = end;\n\n    if (state.virtual.rendered >= state.filteredFiles.length) {\n      if (state.virtual.observer) {\n        state.virtual.observer.disconnect();\n      }\n      if (state.virtual.sentinel) {\n        state.virtual.sentinel.remove();\n        state.virtual.sentinel = null;\n      }\n    }\n\n    state.virtual.inFlight = false;\n    scheduleHydrateVideoDetails();\n  }\n\n  function setupVirtualObserver(): void {\n    if (!state.virtual.sentinel) return;\n    if (!(\"IntersectionObserver\" in window)) {\n      renderBatch(state.virtual.rendered, state.filteredFiles.length);\n      state.virtual.rendered = state.filteredFiles.length;\n      state.virtual.enabled = false;\n      els.grid?.classList.remove(\"virtualized\");\n      if (state.virtual.sentinel) {\n        state.virtual.sentinel.remove();\n        state.virtual.sentinel = null;\n      }\n      scheduleHydrateVideoDetails();\n      return;\n    }\n\n    state.virtual.observer = new IntersectionObserver(\n      (entries) => {\n        if (entries.some((entry) => entry.isIntersecting)) {\n          renderNextBatch();\n        }\n      },\n      { rootMargin: `0px 0px ${CONFIG.VIRTUAL_PREFETCH_PX}px 0px` }\n    );\n\n    state.virtual.observer.observe(state.virtual.sentinel);\n  }\n\n  function renderGrid(): void {\n    resetVirtualScroll();\n    if (els.grid) els.grid.innerHTML = \"\";\n\n    if (state.filteredFiles.length === 0) {\n      if (els.emptyTitle)\n        els.emptyTitle.textContent =\n          state.files.length === 0 ? \"This share is empty\" : \"No files found\";\n      if (els.emptyMessage)\n        els.emptyMessage.textContent =\n          state.files.length === 0\n            ? \"No files have been shared yet.\"\n            : \"Try adjusting your search or filters\";\n      if (els.empty) els.empty.style.display = \"block\";\n      return;\n    }\n\n    if (els.empty) els.empty.style.display = \"none\";\n\n    const useVirtual = state.filteredFiles.length > CONFIG.VIRTUAL_SCROLL_THRESHOLD;\n    if (useVirtual) {\n      state.virtual.enabled = true;\n      state.virtual.rendered = 0;\n      els.grid?.classList.add(\"virtualized\");\n      state.virtual.sentinel = createVirtualSentinel();\n      els.grid?.appendChild(state.virtual.sentinel);\n      renderNextBatch();\n      setupVirtualObserver();\n    } else {\n      renderBatch(0, state.filteredFiles.length);\n      scheduleHydrateVideoDetails();\n    }\n  }\n\n  function createCardHTML(file: GalleryFile, index: number): string {\n    const path = file.path || file.name;\n    const inlineUrl =\n      file.inline_url || `/api/public/dl/${state.shareHash}/${encodePath(path)}?inline=true`;\n    const downloadUrl =\n      file.download_url || `/api/share/${state.shareHash}/file/${encodePath(path)}?download=1`;\n    const previewUrl = buildPreviewUrl(path, file.size || 0);\n    const previewSrcSet = buildPreviewSrcSet(path, file.size || 0);\n    const previewSrcSetAttr = previewSrcSet\n      ? `srcset=\"${previewSrcSet}\" sizes=\"${PREVIEW_SIZES}\"`\n      : \"\";\n    const isVideo = file.type === \"video\";\n    const isImage = file.type === \"image\";\n\n    let preview = \"\";\n    if (isImage) {\n      preview = `\n        <img class=\"media-preview\" src=\"${previewUrl}\" ${previewSrcSetAttr} data-fallback=\"${inlineUrl}\" loading=\"lazy\" decoding=\"async\" fetchpriority=\"low\" alt=\"${file.name}\"\n             onerror=\"this.onerror=null;this.src=this.dataset.fallback;\">`;\n    } else if (isVideo) {\n      preview = `\n        <img class=\"media-preview\" src=\"${previewUrl}\" ${previewSrcSetAttr} loading=\"lazy\" decoding=\"async\" fetchpriority=\"low\" alt=\"${file.name}\"\n             style=\"object-fit:cover;height:200px;width:100%;\"\n             onerror=\"this.style.display='none';this.nextElementSibling.style.display='flex'\">\n        <div class=\"file-placeholder\" style=\"background:#000;display:none;height:200px;align-items:center;justify-content:center;\">\n            <div style=\"font-size:2.75rem\">üéûÔ∏è</div>\n        </div>\n        <div class=\"play-icon\">‚ñ∂</div>`;\n    } else {\n      preview = `<div class=\"file-placeholder\">${getFileIcon(file.extension)} ${file.extension.toUpperCase()}</div>`;\n    }\n\n    const tag = isVideo ? \"Video\" : isImage ? \"Image\" : \"File\";\n\n    return `\n      <div class=\"media-preview-container\" onclick=\"openMedia(${index}, event)\">\n          <div class=\"media-tag\">${tag}</div>\n          ${preview}\n      </div>\n      <div class=\"media-info\">\n          <div class=\"media-title\">\n              <div class=\"media-name\">${file.name}</div>\n              ${isVideo ? `<div class=\"video-details\" data-video-meta=\"1\" data-path=\"${encodeURIComponent(path)}\">Loading‚Ä¶</div>` : \"\"}\n          </div>\n          <div class=\"media-meta\"><span>${file.extension.toUpperCase()}</span><span>${formatSize(file.size)}</span></div>\n          <div class=\"card-actions\">\n              <button class=\"card-btn primary\" onclick=\"openMedia(${index}, event)\">${isVideo ? \"Play\" : \"View\"}</button>\n              <a href=\"${downloadUrl}\" download=\"${file.name}\" class=\"card-btn\">‚¨á</a>\n          </div>\n      </div>`;\n  }\n\n  // ============ SLIDESHOW ============\n  function toggleSlideshow(): void {\n    state.isSlideshow = !state.isSlideshow;\n    const slideshowBtn = document.getElementById(\"slideshowBtn\");\n    if (slideshowBtn) slideshowBtn.textContent = state.isSlideshow ? \"‚è∏\" : \"‚ñ∂\";\n\n    if (state.isSlideshow) {\n      els.modal?.classList.add(\"immersive\");\n      state.slideshowInterval = setInterval(() => {\n        if (state.currentIndex < state.filteredFiles.length - 1) {\n          navigate(1);\n        } else {\n          state.currentIndex = -1;\n          navigate(1);\n        }\n      }, CONFIG.SLIDESHOW_INTERVAL);\n    } else {\n      if (state.slideshowInterval) clearInterval(state.slideshowInterval);\n      els.modal?.classList.remove(\"immersive\");\n    }\n  }\n\n  // ============ EVENT HANDLERS ============\n  function setupPullToRefresh(): void {\n    if (!els.pullToRefresh) return;\n    const indicator = els.pullToRefresh;\n    const PULL_THRESHOLD = 70;\n    const PULL_MAX = 120;\n    let startY: number | null = null;\n\n    function resetIndicator(): void {\n      indicator.style.height = \"0px\";\n      indicator.classList.remove(\"ready\", \"refreshing\");\n      indicator.textContent = \"Pull to refresh\";\n      state.isPulling = false;\n    }\n\n    window.addEventListener(\n      \"touchstart\",\n      (e: TouchEvent) => {\n        if (state.isRefreshing || els.modal?.style.display === \"block\") return;\n        if (window.scrollY > 0) return;\n        startY = e.touches[0].screenY;\n        state.isPulling = true;\n      },\n      { passive: true }\n    );\n\n    window.addEventListener(\n      \"touchmove\",\n      (e: TouchEvent) => {\n        if (!state.isPulling || startY === null || state.isRefreshing) return;\n        const delta = e.touches[0].screenY - startY;\n        if (delta <= 0) return;\n        const distance = Math.min(delta, PULL_MAX);\n        indicator.style.height = `${distance}px`;\n        indicator.classList.toggle(\"ready\", distance >= PULL_THRESHOLD);\n        indicator.textContent =\n          distance >= PULL_THRESHOLD ? \"Release to refresh\" : \"Pull to refresh\";\n      },\n      { passive: true }\n    );\n\n    window.addEventListener(\n      \"touchend\",\n      () => {\n        if (!state.isPulling) return;\n        const shouldRefresh = indicator.classList.contains(\"ready\");\n        if (!shouldRefresh) {\n          resetIndicator();\n          startY = null;\n          return;\n        }\n        state.isRefreshing = true;\n        indicator.classList.remove(\"ready\");\n        indicator.classList.add(\"refreshing\");\n        indicator.style.height = \"56px\";\n        indicator.textContent = \"Refreshing‚Ä¶\";\n        fetchFiles(true)\n          .catch(console.error)\n          .finally(() => {\n            state.isRefreshing = false;\n            resetIndicator();\n          });\n        startY = null;\n      },\n      { passive: true }\n    );\n  }\n\n  function setupEventHandlers(): void {\n    // Video overlay click handler\n    if (els.videoOverlay) {\n      els.videoOverlay.onclick = (e: MouseEvent): void => {\n        e.preventDefault();\n        e.stopPropagation();\n        reloadCurrentVideo();\n      };\n    }\n\n    // Search\n    let searchTimeout: ReturnType<typeof setTimeout>;\n    if (els.search) {\n      els.search.oninput = (e: Event): void => {\n        clearTimeout(searchTimeout);\n        searchTimeout = setTimeout(() => {\n          state.search = (e.target as HTMLInputElement).value;\n          filterAndRender();\n        }, 150);\n      };\n    }\n\n    // Sort\n    if (els.sort) {\n      els.sort.onchange = (e: Event): void => {\n        state.sort = (e.target as HTMLSelectElement).value;\n        savePrefs({ sort: state.sort });\n        filterAndRender();\n      };\n    }\n\n    // Filters\n    els.filters.forEach((btn) => {\n      btn.onclick = (): void => {\n        els.filters.forEach((b) => {\n          b.classList.remove(\"active\");\n          b.setAttribute(\"aria-pressed\", \"false\");\n        });\n        btn.classList.add(\"active\");\n        btn.setAttribute(\"aria-pressed\", \"true\");\n        state.filter = btn.dataset.filter || \"all\";\n        savePrefs({ filter: state.filter });\n        filterAndRender();\n      };\n    });\n\n    // Copy link\n    if (els.copyLink) {\n      els.copyLink.onclick = async (): Promise<void> => {\n        const success = await copyToClipboard(window.location.href);\n        showToast(success ? \"Link copied\" : \"Copy failed - select and copy manually\");\n      };\n    }\n\n    // Stream Gallery button\n    if (els.streamBtn) {\n      els.streamBtn.onclick = (): void => {\n        const streamUrl = \"/stream/\" + state.shareHash;\n        window.open(streamUrl, \"_blank\");\n      };\n    }\n\n    // Refresh\n    if (els.refresh) {\n      els.refresh.onclick = (e: MouseEvent): void => {\n        if (e.shiftKey) {\n          killAllConnections();\n          location.reload();\n        } else {\n          fetchFiles(true).catch(console.error);\n        }\n      };\n    }\n\n    // Details toggle\n    if (els.details) {\n      els.details.onclick = (): void => setDetailsEnabled(!state.showDetails);\n    }\n\n    // Modal controls\n    const closeBtn = document.getElementById(\"closeBtn\");\n    const prevBtn = document.getElementById(\"prevBtn\");\n    const nextBtn = document.getElementById(\"nextBtn\");\n    const slideshowBtn = document.getElementById(\"slideshowBtn\");\n    const zoomBtn = document.getElementById(\"zoomBtn\");\n    const fullscreenBtn = document.getElementById(\"fullscreenBtn\");\n    const gridBtn = document.getElementById(\"gridViewBtn\");\n    const listBtn = document.getElementById(\"listViewBtn\");\n    const helpBtn = document.getElementById(\"helpBtn\");\n    const closeHelpBtn = document.getElementById(\"closeHelpBtn\");\n\n    if (closeBtn) closeBtn.onclick = closeModal;\n    if (prevBtn) prevBtn.onclick = (): void => navigate(-1);\n    if (nextBtn) nextBtn.onclick = (): void => navigate(1);\n    if (slideshowBtn) slideshowBtn.onclick = toggleSlideshow;\n\n    // Zoom\n    if (zoomBtn) {\n      zoomBtn.onclick = (): void => {\n        const media = els.modalContent?.querySelector(\".modal-media\");\n        if (!media || media.tagName !== \"IMG\") return;\n        const nextScale = state.zoomScale > 1.05 ? 1 : 1.5;\n        setZoomScale(nextScale);\n      };\n    }\n\n    // Fullscreen\n    if (fullscreenBtn) {\n      fullscreenBtn.onclick = (): void => {\n        if (document.fullscreenElement) {\n          document.exitFullscreen?.();\n          els.modal?.classList.remove(\"immersive\");\n        } else {\n          els.modal?.requestFullscreen?.();\n          els.modal?.classList.add(\"immersive\");\n        }\n      };\n    }\n\n    // Layout toggle\n    if (gridBtn) {\n      gridBtn.onclick = (): void => {\n        state.layout = \"grid\";\n        savePrefs({ layout: \"grid\" });\n        els.grid?.classList.remove(\"list-view\");\n        gridBtn.classList.add(\"active\");\n        listBtn?.classList.remove(\"active\");\n      };\n    }\n    if (listBtn) {\n      listBtn.onclick = (): void => {\n        state.layout = \"list\";\n        savePrefs({ layout: \"list\" });\n        els.grid?.classList.add(\"list-view\");\n        listBtn.classList.add(\"active\");\n        gridBtn?.classList.remove(\"active\");\n      };\n    }\n\n    // Back to top\n    window.addEventListener(\"scroll\", () => {\n      els.backToTop?.classList.toggle(\"show\", window.scrollY > 500);\n    });\n    if (els.backToTop) {\n      els.backToTop.onclick = (): void => window.scrollTo({ top: 0, behavior: \"smooth\" });\n    }\n\n    // Help\n    if (helpBtn) {\n      helpBtn.onclick = (): void => els.helpOverlay?.classList.add(\"show\");\n    }\n    if (closeHelpBtn) {\n      closeHelpBtn.onclick = (): void => els.helpOverlay?.classList.remove(\"show\");\n    }\n    if (els.helpOverlay) {\n      els.helpOverlay.onclick = (e: MouseEvent): void => {\n        if (e.target === els.helpOverlay) els.helpOverlay?.classList.remove(\"show\");\n      };\n    }\n\n    // Keyboard shortcuts\n    document.addEventListener(\"keydown\", (e: KeyboardEvent) => {\n      if (e.key === \"?\" || (e.key === \"/\" && e.shiftKey)) {\n        e.preventDefault();\n        els.helpOverlay?.classList.toggle(\"show\");\n        return;\n      }\n\n      if (e.key === \"Escape\") {\n        if (els.helpOverlay?.classList.contains(\"show\")) {\n          els.helpOverlay?.classList.remove(\"show\");\n        } else if (els.modal?.style.display === \"block\") {\n          closeModal();\n        }\n        return;\n      }\n\n      if (e.key === \"k\" || e.key === \"K\") {\n        e.preventDefault();\n        killAllConnections();\n        return;\n      }\n\n      if ((e.key === \"r\" || e.key === \"R\") && els.modal?.style.display === \"block\") {\n        const file = state.filteredFiles[state.currentIndex];\n        if (file?.type === \"video\") {\n          e.preventDefault();\n          reloadCurrentVideo();\n        }\n        return;\n      }\n\n      if (els.modal?.style.display !== \"block\") return;\n\n      if (e.key === \"ArrowLeft\") navigate(-1);\n      else if (e.key === \"ArrowRight\") navigate(1);\n      else if (e.key === \" \" && state.filteredFiles[state.currentIndex]?.type !== \"video\") {\n        e.preventDefault();\n        toggleSlideshow();\n      }\n    });\n\n    function isZoomableTarget(target: EventTarget | null): boolean {\n      const current = state.filteredFiles[state.currentIndex];\n      if (!current || current.type !== \"image\") return false;\n      const el = target as HTMLElement;\n      return !!(el && (el.classList?.contains(\"modal-media\") || el.closest?.(\".modal-media\")));\n    }\n\n    // Touch swipe + pinch zoom (images)\n    if (els.modalContent) {\n      els.modalContent.addEventListener(\n        \"touchstart\",\n        (e: TouchEvent) => {\n          if (e.touches && e.touches.length === 2 && isZoomableTarget(e.target)) {\n            const distance = getTouchDistance(e.touches);\n            if (distance) {\n              state.pinchStartDistance = distance;\n              state.pinchStartScale = state.zoomScale || 1;\n            }\n            state.touchStartX = null;\n            return;\n          }\n\n          const current = state.filteredFiles[state.currentIndex];\n          if (current?.type === \"video\") {\n            state.touchStartX = null;\n            return;\n          }\n          const target = e.target as HTMLElement;\n          if (target.tagName === \"VIDEO\" || target.closest(\"video\")) {\n            state.touchStartX = null;\n            return;\n          }\n          state.touchStartX = e.changedTouches[0].screenX;\n        },\n        { passive: true }\n      );\n\n      els.modalContent.addEventListener(\n        \"touchmove\",\n        (e: TouchEvent) => {\n          if (!state.pinchStartDistance || !isZoomableTarget(e.target)) return;\n          const distance = getTouchDistance(e.touches);\n          if (!distance) return;\n          const scale = state.pinchStartScale * (distance / state.pinchStartDistance);\n          setZoomScale(scale);\n          e.preventDefault();\n        },\n        { passive: false }\n      );\n\n      els.modalContent.addEventListener(\n        \"touchend\",\n        (e: TouchEvent) => {\n          if (state.pinchStartDistance && (!e.touches || e.touches.length < 2)) {\n            state.pinchStartDistance = null;\n            state.pinchStartScale = state.zoomScale || 1;\n          }\n\n          if (state.touchStartX === null) return;\n          const current = state.filteredFiles[state.currentIndex];\n          if (current?.type === \"video\") return;\n          const target = e.target as HTMLElement;\n          if (target.tagName === \"VIDEO\" || target.closest(\"video\")) return;\n\n          const diff = state.touchStartX - e.changedTouches[0].screenX;\n          if (Math.abs(diff) > 50) navigate(diff > 0 ? 1 : -1);\n        },\n        { passive: true }\n      );\n    }\n\n    // Mouse movement for immersive\n    els.modal?.addEventListener(\"mousemove\", resetImmersiveTimer);\n\n    // Page visibility - pause video when hidden\n    document.addEventListener(\"visibilitychange\", () => {\n      if (document.hidden && els.modal?.style.display === \"block\") {\n        const video = els.modalContent?.querySelector(\"video\") as HTMLVideoElement | null;\n        if (video) video.pause();\n      }\n    });\n\n    // Before unload - cleanup\n    window.addEventListener(\"beforeunload\", () => {\n      destroyVideo();\n      preloadCache.clear();\n    });\n\n    // Online/offline\n    window.addEventListener(\"online\", () => {\n      state.isOffline = false;\n      els.offlineBanner?.classList.remove(\"show\");\n      if (state.files.length === 0) fetchFiles(true).catch(console.error);\n    });\n    window.addEventListener(\"offline\", () => {\n      state.isOffline = true;\n      els.offlineBanner?.classList.add(\"show\");\n    });\n\n    // Fullscreen change\n    document.addEventListener(\"fullscreenchange\", () => {\n      if (!document.fullscreenElement) els.modal?.classList.remove(\"immersive\");\n    });\n\n    setupPullToRefresh();\n  }\n\n  // ============ INITIALIZATION ============\n  async function init(): Promise<void> {\n    initElements();\n    initTheme();\n    setupResourceHints();\n\n    state.shareHash =\n      new URLSearchParams(window.location.search).get(\"share\") ||\n      window.location.pathname\n        .split(\"/\")\n        .filter((p) => p && p !== \"gallery\")\n        .pop() ||\n      null;\n\n    if (!state.shareHash || state.shareHash === \"gallery\") {\n      if (els.loading) els.loading.style.display = \"none\";\n      if (els.errorTitle) els.errorTitle.textContent = \"Invalid share link\";\n      if (els.errorMessage) els.errorMessage.textContent = \"Please use a valid Dropbox share link.\";\n      if (els.error) els.error.style.display = \"block\";\n      return;\n    }\n\n    const prefs = loadPrefs();\n    state.filter = prefs.filter || \"all\";\n    state.sort = prefs.sort || \"type_asc\";\n    state.showDetails = prefs.show_details !== undefined ? !!prefs.show_details : true;\n    const isSmallScreen = window.matchMedia?.(\"(max-width: 900px)\")?.matches;\n    state.layout = prefs.layout || (IS_IOS || isSmallScreen ? \"list\" : \"grid\");\n\n    if (els.sort) els.sort.value = state.sort;\n    els.filters.forEach((b) => {\n      const isActive = b.dataset.filter === state.filter;\n      b.classList.toggle(\"active\", isActive);\n      b.setAttribute(\"aria-pressed\", isActive ? \"true\" : \"false\");\n    });\n    if (state.layout === \"list\") {\n      els.grid?.classList.add(\"list-view\");\n      document.getElementById(\"listViewBtn\")?.classList.add(\"active\");\n      document.getElementById(\"gridViewBtn\")?.classList.remove(\"active\");\n    }\n\n    setDetailsEnabled(state.showDetails, { skipSave: true });\n    setupEventHandlers();\n\n    if (els.downloadAll) {\n      els.downloadAll.href = `/api/share/${state.shareHash}/download`;\n    }\n\n    if (state.isOffline) {\n      els.offlineBanner?.classList.add(\"show\");\n    }\n\n    try {\n      await fetchFiles();\n    } catch (err) {\n      console.error(err);\n      if (els.loading) els.loading.style.display = \"none\";\n      if (els.errorTitle) els.errorTitle.textContent = \"Failed to load gallery\";\n      if (els.errorMessage)\n        els.errorMessage.textContent =\n          err instanceof Error ? err.message : \"Please check your connection.\";\n      if (els.error) els.error.style.display = \"block\";\n    }\n  }\n\n  // Start\n  if (document.readyState === \"loading\") {\n    document.addEventListener(\"DOMContentLoaded\", init);\n  } else {\n    init();\n  }\n})();\n"],"names":["CONFIG","DROPPR_CONFIG","PREVIEW_DEFAULT_WIDTHS","PREVIEW_WIDTHS","normalizeWidths","PREVIEW_FORMAT","PREVIEW_SIZES","ASSET_BASE_URL","UA","IS_IOS","state","els","detailsHydrationTimer","initElements","PREFS_KEY","loadPrefs","savePrefs","prefs","getTheme","setTheme","theme","isDark","toggleTheme","current","initTheme","encodePath","p","s","list","normalized","value","a","b","unique","buildPreviewUrl","path","size","width","url","buildPreviewSrcSet","formatSize","k","i","formatDuration","seconds","total","h","m","sec","formatUnixSeconds","tsSeconds","n","clamp","min","max","getTouchDistance","touches","dx","dy","setZoomScale","scale","_a","media","zoomBtn","addResourceHint","href","trimmed","preconnect","dnsPrefetch","setupResourceHints","actionLabel","action","formatVideoSummary","meta","sizeOverride","v","w","res","vCodec","aCodec","codecs","dur","fpsNum","fps","updateDetailsButton","setDetailsEnabled","enabled","opts","on","hydrateVideoDetails","fetchVideoMeta","renderVideoDetails","el","data","lines","uploaded","original","processed","cur","l","pending","idx","maxWorkers","worker","enc","key","workers","showToast","msg","t","toastMessage","copyToClipboard","text","textarea","range","selection","success","lockPageScroll","unlockPageScroll","y","clearAllVideoTimers","destroyVideo","hideVideoOverlay","video","e","killAllConnections","showVideoOverlay","message","reloadCurrentVideo","updateModalContent","speeds","currentSpeedIndex","file","closeModal","inlineUrl","previewUrl","downloadUrl","createVideoPlayer","getFileIcon","videoUrl","posterUrl","container","updateVideoMeta","base","bufferedTotal","bufferedAhead","ct","pct","extra","hasPlayed","speedBtn","speed","resetVideoBtn","openModal","index","toggleSlideshow","resetImmersiveTimer","maybePreloadAdjacentImages","openMedia","evt","navigate","direction","newIndex","nextFile","preloadCache","preloadImage","firstKey","img","preloadAdjacentImages","offset","ext","fetchFiles","forceRefresh","params","recursiveParam","flag","controller","timeout","filterAndRender","searchLower","matching","f","countAll","countImages","countVideos","matchesType","matchesSearch","typeScore","renderGrid","scheduleHydrateVideoDetails","resetVirtualScroll","_b","createVirtualSentinel","sentinel","renderBatch","start","end","frag","card","createCardHTML","renderNextBatch","setupVirtualObserver","entries","entry","previewSrcSet","previewSrcSetAttr","isVideo","isImage","preview","slideshowBtn","setupPullToRefresh","indicator","PULL_THRESHOLD","PULL_MAX","startY","resetIndicator","delta","distance","setupEventHandlers","searchTimeout","btn","streamUrl","closeBtn","prevBtn","nextBtn","fullscreenBtn","gridBtn","listBtn","helpBtn","closeHelpBtn","nextScale","_c","_d","_e","_f","_g","isZoomableTarget","target","diff","init","isSmallScreen","isActive","err"],"mappings":"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"}